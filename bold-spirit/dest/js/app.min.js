"use strict";document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector(".scroll-to-top"),t=document.querySelector(".hero__btn"),n=document.querySelector(".form-module");function o(e,t){var n=window.pageYOffset,o=e-n,r=performance.now();requestAnimationFrame((function e(i){var a,s=i-r,d=Math.min(s/t,1),c=(a=d)<.5?4*a*a*a:(a-1)*(2*a-2)*(2*a-2)+1,l=n+o*c;window.scrollTo(0,l),d<1&&requestAnimationFrame(e)}))}window.addEventListener("scroll",(function(){window.pageYOffset>300?e.classList.add("show"):e.classList.remove("show")})),e.addEventListener("click",(function(){o(0,1800)})),t.addEventListener("click",(function(){o(n.getBoundingClientRect().top,1800)}));var r=document.querySelectorAll(".form-module .wpforms-field input"),i=document.querySelector(".form-module .wpforms-field textarea");r.forEach((function(e){var t=document.createElement("div");t.className="input-wrapper",e.parentNode.appendChild(t),t.appendChild(e)}));var a=document.createElement("div");a.className="input-wrapper",i.parentNode.appendChild(a),a.appendChild(i);var s=document.querySelector(".form-module .form__btn"),d=document.createElement("span");d.className="form__btn-bg",s.appendChild(d);var c=s.textContent,l=document.createElement("span");s.appendChild(l),l.textContent=c;var p=document.querySelector(".contact .form__btn"),m=document.createElement("span");m.className="form__btn-bg",p.appendChild(m);var u=p.textContent,w=document.createElement("span");p.appendChild(w),w.textContent=u,document.getElementById("wpforms-form-248").addEventListener("submit",(function(e){document.getElementById("wpforms-248-field_1");var t=document.getElementById("wpforms-248-field_2");setTimeout((function(){t.classList.contains("wpforms-error")?console.log("there is an error"):(console.log("no error"),document.querySelector(".site-body").classList.add("show-popup"))}),1e3)})),document.querySelector(".popup-download__btn").addEventListener("click",(function(){document.querySelector(".site-body").classList.remove("show-popup")}));new Swiper(".slider-main-wrapper .slider-container",{spaceBetween:10,slidesPerView:"auto",speed:500,loop:!0,centeredSlides:!0,navigation:{nextEl:".swiper-arrow__next",prevEl:".swiper-arrow__prev"},breakpoints:{769:{spaceBetween:12},1025:{spaceBetween:31}}}),new Swiper(".review-main-wrapper .review-container",{spaceBetween:5,slidesPerView:"auto",centeredSlides:!0,loop:!0,navigation:{nextEl:".review-arrows .swiper-arrow__next",prevEl:".review-arrows .swiper-arrow__prev"},pagination:{el:".swiper-pagination",clickable:!0},breakpoints:{360:{initialSlide:8},769:{slidesPerView:2,spaceBetween:7},1025:{slidesPerView:3,spaceBetween:15,initialSlide:0}},on:{init:function(){var e=0;this.slides.each((function(){var t=this.clientHeight;t>e&&(e=t)})),this.slides.each((function(){this.style.height="".concat(e+20,"px")})),this.update()}}})}));
"use strict";document.addEventListener("DOMContentLoaded",(function(){var t=[document.querySelector(".hero__btn"),document.querySelector(".posts-load-more__btn")],e=new gsap.timeline({paused:!0});e.add("start"),e.add("finish"),e.to(".btn__animated svg stop:nth-child(4)",{attr:{offset:.7},duration:.3},"start"),e.to(".btn__animated svg stop:nth-child(5)",{attr:{offset:.8},duration:.3},"start"),e.to(".btn__animated svg stop:nth-child(6)",{attr:{offset:.9},duration:.3},"start"),e.to(".btn__animated svg stop:nth-child(2)",{attr:{offset:.6},duration:.3},"start"),e.to(".btn__animated svg #paint0_linear_31_6071",{attr:{y2:180},duration:.3},"start"),t.forEach((function(t){t.addEventListener("mouseenter",(function(){e.play()})),t.addEventListener("mouseleave",(function(){e.reverse()}))}))}));
"use strict";var $=jQuery;$(document).ready((function(){var s=6,t=!0,o=jQuery(".posts-load-more__btn"),e=jQuery(".btn-load-less");o.on("click",(function(){var o=jQuery(this);if(o.blur(),window.innerWidth<768){var a=window.pageYOffset-(window.innerHeight-this.getBoundingClientRect().bottom);window.scrollTo(0,a)}var r=jQuery(this).data("post");if(!t)return;jQuery.ajax({url:filters_ajax.url,type:"POST",data:{action:"load_more_posts",page:s,postID:r},success:function(a){a&&a.success&&a.data&&a.data.html&&(jQuery(".posts-list").append(a.data.html),s++,t=a.data.hasMoreItems,$(".posts").removeClass("with-load-more"),t||o.addClass("disabled"),e.addClass("show"))},error:function(s,t,o){console.error(o)}})})),e.on("click",(function(){$(".posts-list .post").each((function(s,t){s>2&&$(t).remove()})),$(".posts").addClass("with-load-more"),e.removeClass("show")}))}));
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImFwcF9hbmltYXRpb24uanMiLCJhcHBfanF1ZXJ5LmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsInNjcm9sbFRvVG9wQnRuIiwicXVlcnlTZWxlY3RvciIsInNjcm9sbFRvRm9ybUJ0biIsImZvcm1XcmFwcGVyIiwic21vb3RoU2Nyb2xsVG8iLCJ0YXJnZXRQb3NpdGlvbiIsImR1cmF0aW9uIiwic3RhcnRQb3NpdGlvbiIsIndpbmRvdyIsInBhZ2VZT2Zmc2V0IiwiZGlzdGFuY2UiLCJzdGFydFRpbWUiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInNjcm9sbEFuaW1hdGlvbiIsImN1cnJlbnRUaW1lIiwidCIsImVsYXBzZWRUaW1lIiwicHJvZ3Jlc3MiLCJNYXRoIiwibWluIiwiZWFzZWRQcm9ncmVzcyIsIm5ld1Bvc2l0aW9uIiwic2Nyb2xsVG8iLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ0b3AiLCJjb250YWN0Rm9ybUlucHV0cyIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjb250YWN0Rm9ybVRleHRhcmVhIiwiZm9yRWFjaCIsImlucHV0IiwiY29udGFjdEZvcm1XcmFwcGVyIiwiY3JlYXRlRWxlbWVudCIsImNsYXNzTmFtZSIsInBhcmVudE5vZGUiLCJhcHBlbmRDaGlsZCIsImNvbnRhY3RGb3JtVGV4dGFyZWFXcmFwcGVyIiwiY29udGFjdEZvcm1CdXR0b24iLCJjb250YWN0Rm9ybUJ1dHRvbkJhY2tncm91bmQiLCJjb250YWN0Rm9ybUJ1dHRvblRleHREZWZhdWx0IiwidGV4dENvbnRlbnQiLCJjb250YWN0Rm9ybUJ1dHRvblRleHROZXciLCJwZGZGb3JtQnV0dG9uIiwicGRmRm9ybUJ1dHRvbkJhY2tncm91bmQiLCJwZGZGb3JtQnV0dG9uVGV4dERlZmF1bHQiLCJwZGZGb3JtQnV0dG9uVGV4dE5ldyIsImdldEVsZW1lbnRCeUlkIiwiZXZlbnQiLCJwZGZGb3JtSW5wdXRFbWFpbCIsInNldFRpbWVvdXQiLCJjb250YWlucyIsImNvbnNvbGUiLCJsb2ciLCJTd2lwZXIiLCJzcGFjZUJldHdlZW4iLCJzbGlkZXNQZXJWaWV3Iiwic3BlZWQiLCJsb29wIiwiY2VudGVyZWRTbGlkZXMiLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwiYnJlYWtwb2ludHMiLCJwYWdpbmF0aW9uIiwiZWwiLCJjbGlja2FibGUiLCJpbml0aWFsU2xpZGUiLCJvbiIsImluaXQiLCJ0YWxsZXN0SGVpZ2h0IiwidGhpcyIsInNsaWRlcyIsImVhY2giLCJzbGlkZUhlaWdodCIsImNsaWVudEhlaWdodCIsInN0eWxlIiwiaGVpZ2h0IiwiY29uY2F0IiwidXBkYXRlIiwiYnV0dG9ucyIsInRsIiwiZ3NhcCIsInRpbWVsaW5lIiwicGF1c2VkIiwidG8iLCJhdHRyIiwib2Zmc2V0IiwieTIiLCJidXR0b24iLCJwbGF5IiwicmV2ZXJzZSIsIiQiLCJqUXVlcnkiLCJyZWFkeSIsImN1cnJlbnRQYWdlIiwiaGFzTW9yZUl0ZW1zIiwibG9hZE1vcmVBcmVhc0J0biIsImxvYWRMZXNzQnRuIiwibG9hZE1vcmVCdG4iLCJibHVyIiwiaW5uZXJXaWR0aCIsImlubmVySGVpZ2h0IiwiYm90dG9tIiwicG9zdElEIiwiZGF0YSIsImFqYXgiLCJ1cmwiLCJmaWx0ZXJzX2FqYXgiLCJ0eXBlIiwiYWN0aW9uIiwicGFnZSIsInN1Y2Nlc3MiLCJyZXNwb25zZSIsImh0bWwiLCJhcHBlbmQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJpZHgiXSwibWFwcGluZ3MiOiJBQUFBLGFBQUFBLFNBQVNDLGlCQUFpQixvQkFBb0IsV0FDMUMsSUFBTUMsRUFBaUJGLFNBQVNHLGNBQWMsa0JBQ3hDQyxFQUFrQkosU0FBU0csY0FBYyxjQUN6Q0UsRUFBY0wsU0FBU0csY0FBYyxnQkFpQjNDLFNBQVNHLEVBQWVDLEVBQWdCQyxHQUNwQyxJQUFNQyxFQUFnQkMsT0FBT0MsWUFDdkJDLEVBQVdMLEVBQWlCRSxFQUM1QkksRUFBWUMsWUFBWUMsTUFlOUJDLHVCQWJBLFNBQVNDLEVBQWdCQyxHQUNyQixJQWVnQkMsRUFmVkMsRUFBY0YsRUFBY0wsRUFDNUJRLEVBQVdDLEtBQUtDLElBQUlILEVBQWNaLEVBQVUsR0FDNUNnQixHQWFVTCxFQWJxQkUsR0FlOUIsR0FBTSxFQUFJRixFQUFJQSxFQUFJQSxHQUFLQSxFQUFJLElBQU0sRUFBSUEsRUFBSSxJQUFNLEVBQUlBLEVBQUksR0FBSyxFQWQ3RE0sRUFBY2hCLEVBQWdCRyxFQUFXWSxFQUUvQ2QsT0FBT2dCLFNBQVMsRUFBR0QsR0FFZkosRUFBVyxHQUNYTCxzQkFBc0JDLEVBRTlCLEdBR0osQ0FsQ0FQLE9BQU9ULGlCQUFpQixVQUFVLFdBQzFCUyxPQUFPQyxZQUFjLElBQ3JCVCxFQUFleUIsVUFBVUMsSUFBSSxRQUU3QjFCLEVBQWV5QixVQUFVRSxPQUFPLE9BRXhDLElBRUEzQixFQUFlRCxpQkFBaUIsU0FBUyxXQUNyQ0ssRUFBZSxFQVZFLEtBV3JCLElBQ0FGLEVBQWdCSCxpQkFBaUIsU0FBUyxXQUN0Q0ssRUFBZUQsRUFBWXlCLHdCQUF3QkMsSUFibEMsS0FjckIsSUE0QkEsSUFBTUMsRUFBb0JoQyxTQUFTaUMsaUJBQWlCLHFDQUM5Q0MsRUFBc0JsQyxTQUFTRyxjQUFjLHdDQUNuRDZCLEVBQWtCRyxTQUFRLFNBQVNDLEdBQy9CLElBQUlDLEVBQXFCckMsU0FBU3NDLGNBQWMsT0FDaERELEVBQW1CRSxVQUFZLGdCQUMvQkgsRUFBTUksV0FBV0MsWUFBWUosR0FDN0JBLEVBQW1CSSxZQUFZTCxFQUNuQyxJQUVBLElBQUlNLEVBQTZCMUMsU0FBU3NDLGNBQWMsT0FDeERJLEVBQTJCSCxVQUFZLGdCQUN2Q0wsRUFBb0JNLFdBQVdDLFlBQVlDLEdBQzNDQSxFQUEyQkQsWUFBWVAsR0FHdkMsSUFBTVMsRUFBb0IzQyxTQUFTRyxjQUFjLDJCQUMzQ3lDLEVBQThCNUMsU0FBU3NDLGNBQWMsUUFDM0RNLEVBQTRCTCxVQUFZLGVBQ3hDSSxFQUFrQkYsWUFBWUcsR0FFOUIsSUFBTUMsRUFBK0JGLEVBQWtCRyxZQUNqREMsRUFBMkIvQyxTQUFTc0MsY0FBYyxRQUN4REssRUFBa0JGLFlBQVlNLEdBQzlCQSxFQUF5QkQsWUFBY0QsRUFHdkMsSUFBTUcsRUFBZ0JoRCxTQUFTRyxjQUFjLHVCQUN2QzhDLEVBQTBCakQsU0FBU3NDLGNBQWMsUUFDdkRXLEVBQXdCVixVQUFZLGVBQ3BDUyxFQUFjUCxZQUFZUSxHQUUxQixJQUFNQyxFQUEyQkYsRUFBY0YsWUFDekNLLEVBQXVCbkQsU0FBU3NDLGNBQWMsUUFDcERVLEVBQWNQLFlBQVlVLEdBQzFCQSxFQUFxQkwsWUFBY0ksRUFFckJsRCxTQUFTb0QsZUFBZSxvQkFFOUJuRCxpQkFBaUIsVUFBVSxTQUFTb0QsR0FDakJyRCxTQUFTb0QsZUFBZSx1QkFBL0MsSUFDSUUsRUFBb0J0RCxTQUFTb0QsZUFBZSx1QkFDaERHLFlBQVcsV0FDSEQsRUFBa0IzQixVQUFVNkIsU0FBUyxpQkFDckNDLFFBQVFDLElBQUksc0JBRVpELFFBQVFDLElBQUksWUFDQzFELFNBQVNHLGNBQWMsY0FDL0J3QixVQUFVQyxJQUFJLGNBRTNCLEdBQUcsSUFDUCxJQUV3QjVCLFNBQVNHLGNBQWMsd0JBQy9CRixpQkFBaUIsU0FBUyxXQUN6QkQsU0FBU0csY0FBYyxjQUMvQndCLFVBQVVFLE9BQU8sYUFDMUIsSUFLb0IsSUFBSThCLE9BQU8seUNBQTBDLENBRXJFQyxhQUFjLEdBQ2RDLGNBQWdCLE9BQ2hCQyxNQUFnQixJQUNoQkMsTUFBZ0IsRUFDaEJDLGdCQUFnQixFQUNoQkMsV0FBWSxDQUNSQyxPQUFRLHNCQUNSQyxPQUFRLHVCQU9aQyxZQUFhLENBQ1QsSUFBSyxDQUNEUixhQUFjLElBRWxCLEtBQU0sQ0FDRkEsYUFBYyxPQUtOLElBQUlELE9BQU8seUNBQTBDLENBQ3JFQyxhQUFjLEVBQ2RDLGNBQWdCLE9BQ2hCRyxnQkFBZ0IsRUFDaEJELE1BQWdCLEVBQ2hCRSxXQUFZLENBQ1JDLE9BQVEscUNBQ1JDLE9BQVEsc0NBRVpFLFdBQVksQ0FDUkMsR0FBSSxxQkFDSkMsV0FBVyxHQUVmSCxZQUFhLENBQ1QsSUFBSyxDQUNESSxhQUFjLEdBRWxCLElBQUssQ0FDRFgsY0FBZSxFQUNmRCxhQUFjLEdBRWxCLEtBQU0sQ0FDRkMsY0FBZSxFQUNmRCxhQUFjLEdBQ2RZLGFBQWMsSUFHdEJDLEdBQUksQ0FDQUMsS0FBTSxXQUVGLElBQUlDLEVBQWdCLEVBQ3BCQyxLQUFLQyxPQUFPQyxNQUFLLFdBQ2IsSUFBTUMsRUFBY0gsS0FBS0ksYUFDckJELEVBQWNKLElBQ2RBLEVBQWdCSSxFQUV4QixJQUdBSCxLQUFLQyxPQUFPQyxNQUFLLFdBQ2JGLEtBQUtLLE1BQU1DLE9BQU0sR0FBQUMsT0FBTVIsRUFBZ0IsR0FBRSxLQUM3QyxJQUdBQyxLQUFLUSxRQUNULElBR1o7QUNyTEEsYUFBQXBGLFNBQVNDLGlCQUFpQixvQkFBb0IsV0FDMUMsSUFBTW9GLEVBQVUsQ0FDWnJGLFNBQVNHLGNBQWMsY0FDdkJILFNBQVNHLGNBQWMsMEJBRXZCbUYsRUFBSyxJQUFJQyxLQUFLQyxTQUFTLENBQUNDLFFBQU8sSUFDbkNILEVBQUcxRCxJQUFJLFNBQ1AwRCxFQUFHMUQsSUFBSSxVQUNQMEQsRUFBR0ksR0FBRyx1Q0FBdUMsQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLElBQU1wRixTQUFVLElBQUssU0FDaEY4RSxFQUFHSSxHQUFHLHVDQUF1QyxDQUFDQyxLQUFLLENBQUNDLE9BQU8sSUFBTXBGLFNBQVUsSUFBSyxTQUNoRjhFLEVBQUdJLEdBQUcsdUNBQXVDLENBQUNDLEtBQUssQ0FBQ0MsT0FBTyxJQUFNcEYsU0FBVSxJQUFLLFNBQ2hGOEUsRUFBR0ksR0FBRyx1Q0FBdUMsQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLElBQU1wRixTQUFVLElBQUssU0FDaEY4RSxFQUFHSSxHQUFHLDRDQUE0QyxDQUFDQyxLQUFLLENBQUNFLEdBQUcsS0FBTXJGLFNBQVUsSUFBSyxTQUdqRjZFLEVBQVFsRCxTQUFRLFNBQUEyRCxHQUNaQSxFQUFPN0YsaUJBQWlCLGNBQWMsV0FDbENxRixFQUFHUyxNQUNQLElBQ0FELEVBQU83RixpQkFBaUIsY0FBYyxXQUNsQ3FGLEVBQUdVLFNBQ1AsR0FDSixHQTBCSjtBQ2hEQSxhQUFBLElBQUlDLEVBQUlDLE9BQ1JELEVBQUVqRyxVQUFVbUcsT0FBTSxXQUNkLElBQUlDLEVBQWMsRUFDZEMsR0FBZSxFQUNmQyxFQUFtQkosT0FBTyx5QkFDMUJLLEVBQWNMLE9BQU8sa0JBQ3pCSSxFQUFpQjdCLEdBQUcsU0FXcEIsV0FDSSxJQUFJK0IsRUFBY04sT0FBT3RCLE1BR3pCLEdBRkE0QixFQUFZQyxPQUVUL0YsT0FBT2dHLFdBQWEsSUFBSyxDQUN4QixJQUFJaEYsRUFBV2hCLE9BQU9DLGFBQWVELE9BQU9pRyxZQUFjL0IsS0FBSzlDLHdCQUF3QjhFLFFBQ3ZGbEcsT0FBT2dCLFNBQVMsRUFBR0EsRUFDdkIsQ0FFQSxJQUFJbUYsRUFBU1gsT0FBT3RCLE1BQU1rQyxLQUFLLFFBQy9CLElBQUtULEVBQ0QsT0FHSkgsT0FBT2EsS0FBSyxDQUNSQyxJQUFLQyxhQUFhRCxJQUNsQkUsS0FBTSxPQUNOSixLQUFNLENBQ0ZLLE9BQVEsa0JBQ1JDLEtBQU1oQixFQUNOUyxPQUFRQSxHQUVaUSxRQUFTLFNBQVVDLEdBQ1hBLEdBQVlBLEVBQVNELFNBQVdDLEVBQVNSLE1BQVFRLEVBQVNSLEtBQUtTLE9BQy9EckIsT0FBTyxlQUFlc0IsT0FBT0YsRUFBU1IsS0FBS1MsTUFDM0NuQixJQUNBQyxFQUFlaUIsRUFBU1IsS0FBS1QsYUFDN0JKLEVBQUUsVUFBVXdCLFlBQVksa0JBQ25CcEIsR0FDREcsRUFBWWtCLFNBQVMsWUFFekJuQixFQUFZbUIsU0FBUyxRQUU3QixFQUNBQyxNQUFPLFNBQVVDLEVBQUtDLEVBQVFGLEdBQzFCbEUsUUFBUWtFLE1BQU1BLEVBQ2xCLEdBRVIsSUFoREFwQixFQUFZOUIsR0FBRyxTQUVmLFdBQ2tCd0IsRUFBRSxxQkFDVm5CLE1BQUssU0FBQ2dELEVBQUt4RCxHQUNUd0QsRUFBTSxHQUFJN0IsRUFBRTNCLEdBQUl6QyxRQUN4QixJQUNBb0UsRUFBRSxVQUFVeUIsU0FBUyxrQkFDckJuQixFQUFZa0IsWUFBWSxPQUM1QixHQXdDSiIsImZpbGUiOiJhcHAubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IHNjcm9sbFRvVG9wQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjcm9sbC10by10b3AnKTtcclxuICAgIGNvbnN0IHNjcm9sbFRvRm9ybUJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvX19idG4nKTtcclxuICAgIGNvbnN0IGZvcm1XcmFwcGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZvcm0tbW9kdWxlJyk7XHJcbiAgICBsZXQgc2Nyb2xsRHVyYXRpb24gPSAxODAwO1xyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xyXG4gICAgICAgIGlmICh3aW5kb3cucGFnZVlPZmZzZXQgPiAzMDApIHtcclxuICAgICAgICAgICAgc2Nyb2xsVG9Ub3BCdG4uY2xhc3NMaXN0LmFkZChcInNob3dcIik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgc2Nyb2xsVG9Ub3BCdG4uY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgc2Nyb2xsVG9Ub3BCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBzbW9vdGhTY3JvbGxUbygwLCBzY3JvbGxEdXJhdGlvbik7XHJcbiAgICB9KTtcclxuICAgIHNjcm9sbFRvRm9ybUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBzbW9vdGhTY3JvbGxUbyhmb3JtV3JhcHBlci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AsIHNjcm9sbER1cmF0aW9uKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGZ1bmN0aW9uIHNtb290aFNjcm9sbFRvKHRhcmdldFBvc2l0aW9uLCBkdXJhdGlvbikge1xyXG4gICAgICAgIGNvbnN0IHN0YXJ0UG9zaXRpb24gPSB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcbiAgICAgICAgY29uc3QgZGlzdGFuY2UgPSB0YXJnZXRQb3NpdGlvbiAtIHN0YXJ0UG9zaXRpb247XHJcbiAgICAgICAgY29uc3Qgc3RhcnRUaW1lID0gcGVyZm9ybWFuY2Uubm93KCk7XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHNjcm9sbEFuaW1hdGlvbihjdXJyZW50VGltZSkge1xyXG4gICAgICAgICAgICBjb25zdCBlbGFwc2VkVGltZSA9IGN1cnJlbnRUaW1lIC0gc3RhcnRUaW1lO1xyXG4gICAgICAgICAgICBjb25zdCBwcm9ncmVzcyA9IE1hdGgubWluKGVsYXBzZWRUaW1lIC8gZHVyYXRpb24sIDEpO1xyXG4gICAgICAgICAgICBjb25zdCBlYXNlZFByb2dyZXNzID0gZWFzZUluT3V0Q3ViaWMocHJvZ3Jlc3MpOyAvLyBBcHBseSBlYXNpbmcgZnVuY3Rpb25cclxuICAgICAgICAgICAgY29uc3QgbmV3UG9zaXRpb24gPSBzdGFydFBvc2l0aW9uICsgZGlzdGFuY2UgKiBlYXNlZFByb2dyZXNzO1xyXG5cclxuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKDAsIG5ld1Bvc2l0aW9uKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwcm9ncmVzcyA8IDEpIHtcclxuICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShzY3JvbGxBbmltYXRpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2Nyb2xsQW5pbWF0aW9uKTtcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBlYXNlSW5PdXRDdWJpYyh0KSB7XHJcbiAgICAgICAgLy8gQ3VzdG9tIGVhc2luZyBmdW5jdGlvbiAoY3ViaWMgZWFzaW5nKVxyXG4gICAgICAgIHJldHVybiB0IDwgMC41ID8gNCAqIHQgKiB0ICogdCA6ICh0IC0gMSkgKiAoMiAqIHQgLSAyKSAqICgyICogdCAtIDIpICsgMTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBjb250YWN0Rm9ybUlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5mb3JtLW1vZHVsZSAud3Bmb3Jtcy1maWVsZCBpbnB1dCcpO1xyXG4gICAgY29uc3QgY29udGFjdEZvcm1UZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mb3JtLW1vZHVsZSAud3Bmb3Jtcy1maWVsZCB0ZXh0YXJlYScpO1xyXG4gICAgY29udGFjdEZvcm1JbnB1dHMuZm9yRWFjaChmdW5jdGlvbihpbnB1dCkge1xyXG4gICAgICAgIGxldCBjb250YWN0Rm9ybVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjb250YWN0Rm9ybVdyYXBwZXIuY2xhc3NOYW1lID0gJ2lucHV0LXdyYXBwZXInO1xyXG4gICAgICAgIGlucHV0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoY29udGFjdEZvcm1XcmFwcGVyKTtcclxuICAgICAgICBjb250YWN0Rm9ybVdyYXBwZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xyXG4gICAgfSlcclxuXHJcbiAgICBsZXQgY29udGFjdEZvcm1UZXh0YXJlYVdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIGNvbnRhY3RGb3JtVGV4dGFyZWFXcmFwcGVyLmNsYXNzTmFtZSA9ICdpbnB1dC13cmFwcGVyJztcclxuICAgIGNvbnRhY3RGb3JtVGV4dGFyZWEucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChjb250YWN0Rm9ybVRleHRhcmVhV3JhcHBlcik7XHJcbiAgICBjb250YWN0Rm9ybVRleHRhcmVhV3JhcHBlci5hcHBlbmRDaGlsZChjb250YWN0Rm9ybVRleHRhcmVhKTtcclxuXHJcbi8vICBDb250YWN0IGZvcm0gc3VibWl0IGJ1dHRvblxyXG4gICAgY29uc3QgY29udGFjdEZvcm1CdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1tb2R1bGUgLmZvcm1fX2J0bicpO1xyXG4gICAgY29uc3QgY29udGFjdEZvcm1CdXR0b25CYWNrZ3JvdW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgY29udGFjdEZvcm1CdXR0b25CYWNrZ3JvdW5kLmNsYXNzTmFtZSA9ICdmb3JtX19idG4tYmcnO1xyXG4gICAgY29udGFjdEZvcm1CdXR0b24uYXBwZW5kQ2hpbGQoY29udGFjdEZvcm1CdXR0b25CYWNrZ3JvdW5kKTtcclxuXHJcbiAgICBjb25zdCBjb250YWN0Rm9ybUJ1dHRvblRleHREZWZhdWx0ID0gY29udGFjdEZvcm1CdXR0b24udGV4dENvbnRlbnQ7XHJcbiAgICBjb25zdCBjb250YWN0Rm9ybUJ1dHRvblRleHROZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICBjb250YWN0Rm9ybUJ1dHRvbi5hcHBlbmRDaGlsZChjb250YWN0Rm9ybUJ1dHRvblRleHROZXcpO1xyXG4gICAgY29udGFjdEZvcm1CdXR0b25UZXh0TmV3LnRleHRDb250ZW50ID0gY29udGFjdEZvcm1CdXR0b25UZXh0RGVmYXVsdDtcclxuXHJcbi8vIFNlbGVjdCB0aGUgUERGIGZvcm0gc3VibWl0IGJ1dHRvblxyXG4gICAgY29uc3QgcGRmRm9ybUJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb250YWN0IC5mb3JtX19idG4nKTtcclxuICAgIGNvbnN0IHBkZkZvcm1CdXR0b25CYWNrZ3JvdW5kID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgcGRmRm9ybUJ1dHRvbkJhY2tncm91bmQuY2xhc3NOYW1lID0gJ2Zvcm1fX2J0bi1iZyc7XHJcbiAgICBwZGZGb3JtQnV0dG9uLmFwcGVuZENoaWxkKHBkZkZvcm1CdXR0b25CYWNrZ3JvdW5kKTtcclxuXHJcbiAgICBjb25zdCBwZGZGb3JtQnV0dG9uVGV4dERlZmF1bHQgPSBwZGZGb3JtQnV0dG9uLnRleHRDb250ZW50O1xyXG4gICAgY29uc3QgcGRmRm9ybUJ1dHRvblRleHROZXcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICBwZGZGb3JtQnV0dG9uLmFwcGVuZENoaWxkKHBkZkZvcm1CdXR0b25UZXh0TmV3KTtcclxuICAgIHBkZkZvcm1CdXR0b25UZXh0TmV3LnRleHRDb250ZW50ID0gcGRmRm9ybUJ1dHRvblRleHREZWZhdWx0O1xyXG5cclxuICAgIGxldCBwZGZGb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3dwZm9ybXMtZm9ybS0yNDgnKTtcclxuXHJcbiAgICBwZGZGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgbGV0IHBkZkZvcm1JbnB1dE5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnd3Bmb3Jtcy0yNDgtZmllbGRfMScpO1xyXG4gICAgICAgIGxldCBwZGZGb3JtSW5wdXRFbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd3cGZvcm1zLTI0OC1maWVsZF8yJyk7XHJcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgaWYgKHBkZkZvcm1JbnB1dEVtYWlsLmNsYXNzTGlzdC5jb250YWlucygnd3Bmb3Jtcy1lcnJvcicpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygndGhlcmUgaXMgYW4gZXJyb3InKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdubyBlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWFpbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zaXRlLWJvZHknKVxyXG4gICAgICAgICAgICAgICAgbWFpbi5jbGFzc0xpc3QuYWRkKCdzaG93LXBvcHVwJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIDEwMDApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgY29uc3QgYnRuRG93bG9hZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLWRvd25sb2FkX19idG4nKTtcclxuICAgIGJ0bkRvd2xvYWRQb3B1cC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGNvbnN0IG1haW4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2l0ZS1ib2R5JylcclxuICAgICAgICBtYWluLmNsYXNzTGlzdC5yZW1vdmUoJ3Nob3ctcG9wdXAnKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICAvL3NsaWRlciBzZWN0aW9uIHN3aXBlciBpbml0XHJcblxyXG4gICAgbGV0IHNsaWRlclNlY3Rpb24gPSBuZXcgU3dpcGVyKFwiLnNsaWRlci1tYWluLXdyYXBwZXIgLnNsaWRlci1jb250YWluZXJcIiwge1xyXG4gICAgICAgIC8vIHNwYWNlQmV0d2VlbiAgOiAtNTAsXHJcbiAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMCxcclxuICAgICAgICBzbGlkZXNQZXJWaWV3IDogJ2F1dG8nLFxyXG4gICAgICAgIHNwZWVkICAgICAgICAgOiA1MDAsXHJcbiAgICAgICAgbG9vcCAgICAgICAgICA6IHRydWUsXHJcbiAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgICAgICBuZXh0RWw6ICcuc3dpcGVyLWFycm93X19uZXh0JyxcclxuICAgICAgICAgICAgcHJldkVsOiAnLnN3aXBlci1hcnJvd19fcHJldidcclxuICAgICAgICB9LFxyXG4gICAgICAgIC8qcGFnaW5hdGlvbjoge1xyXG4gICAgICAgICAgICBlbDogJy5zd2lwZXItcGFnaW5hdGlvbicsXHJcbiAgICAgICAgICAgIGNsaWNrYWJsZTogdHJ1ZSxcclxuICAgICAgICAgICAgZHluYW1pY0J1bGxldHM6IHRydWUsXHJcbiAgICAgICAgfSwqL1xyXG4gICAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgICAgIDc2OToge1xyXG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAxMixcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTAyNToge1xyXG4gICAgICAgICAgICAgICAgc3BhY2VCZXR3ZWVuOiAzMVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHJldmlld1NlY3Rpb24gPSBuZXcgU3dpcGVyKFwiLnJldmlldy1tYWluLXdyYXBwZXIgLnJldmlldy1jb250YWluZXJcIiwge1xyXG4gICAgICAgIHNwYWNlQmV0d2VlbjogNSxcclxuICAgICAgICBzbGlkZXNQZXJWaWV3IDogJ2F1dG8nLFxyXG4gICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICAgIGxvb3AgICAgICAgICAgOiB0cnVlLFxyXG4gICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgbmV4dEVsOiAnLnJldmlldy1hcnJvd3MgLnN3aXBlci1hcnJvd19fbmV4dCcsXHJcbiAgICAgICAgICAgIHByZXZFbDogJy5yZXZpZXctYXJyb3dzIC5zd2lwZXItYXJyb3dfX3ByZXYnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgICAgIGVsOiAnLnN3aXBlci1wYWdpbmF0aW9uJyxcclxuICAgICAgICAgICAgY2xpY2thYmxlOiB0cnVlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICAgICAgMzYwOiB7XHJcbiAgICAgICAgICAgICAgICBpbml0aWFsU2xpZGU6IDgsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIDc2OToge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogNyxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgMTAyNToge1xyXG4gICAgICAgICAgICAgICAgc2xpZGVzUGVyVmlldzogMyxcclxuICAgICAgICAgICAgICAgIHNwYWNlQmV0d2VlbjogMTUsXHJcbiAgICAgICAgICAgICAgICBpbml0aWFsU2xpZGU6IDAsXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIG9uOiB7XHJcbiAgICAgICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3Qgc2xpZGUgaGVpZ2h0XHJcbiAgICAgICAgICAgICAgICBsZXQgdGFsbGVzdEhlaWdodCA9IDA7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlcy5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzbGlkZUhlaWdodCA9IHRoaXMuY2xpZW50SGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzbGlkZUhlaWdodCA+IHRhbGxlc3RIZWlnaHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGFsbGVzdEhlaWdodCA9IHNsaWRlSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNldCB0aGUgaGVpZ2h0IG9mIGFsbCBzbGlkZXMgdG8gbWF0Y2ggdGhlIHRhbGxlc3Qgc2xpZGVcclxuICAgICAgICAgICAgICAgIHRoaXMuc2xpZGVzLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3R5bGUuaGVpZ2h0ID0gYCR7dGFsbGVzdEhlaWdodCArIDIwfXB4YDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBzd2lwZXIgdG8gYWRqdXN0IHRvIG5ldyBzbGlkZSBoZWlnaHRzXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZSgpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0sXHJcbiAgICB9KTtcclxufSk7XHJcbiIsImRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICBjb25zdCBidXR0b25zID0gW1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXJvX19idG4nKSxcclxuICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9zdHMtbG9hZC1tb3JlX19idG4nKVxyXG4gICAgXTtcclxuICAgIGxldCB0bCA9IG5ldyBnc2FwLnRpbWVsaW5lKHtwYXVzZWQ6dHJ1ZX0pO1xyXG4gICAgdGwuYWRkKCdzdGFydCcpXHJcbiAgICB0bC5hZGQoJ2ZpbmlzaCcpXHJcbiAgICB0bC50byhcIi5idG5fX2FuaW1hdGVkIHN2ZyBzdG9wOm50aC1jaGlsZCg0KVwiLHthdHRyOntvZmZzZXQ6MC43fSwgZHVyYXRpb246IDAuM30sJ3N0YXJ0JylcclxuICAgIHRsLnRvKFwiLmJ0bl9fYW5pbWF0ZWQgc3ZnIHN0b3A6bnRoLWNoaWxkKDUpXCIse2F0dHI6e29mZnNldDowLjh9LCBkdXJhdGlvbjogMC4zfSwnc3RhcnQnKVxyXG4gICAgdGwudG8oXCIuYnRuX19hbmltYXRlZCBzdmcgc3RvcDpudGgtY2hpbGQoNilcIix7YXR0cjp7b2Zmc2V0OjAuOX0sIGR1cmF0aW9uOiAwLjN9LCdzdGFydCcpXHJcbiAgICB0bC50byhcIi5idG5fX2FuaW1hdGVkIHN2ZyBzdG9wOm50aC1jaGlsZCgyKVwiLHthdHRyOntvZmZzZXQ6MC42fSwgZHVyYXRpb246IDAuM30sJ3N0YXJ0JylcclxuICAgIHRsLnRvKFwiLmJ0bl9fYW5pbWF0ZWQgc3ZnICNwYWludDBfbGluZWFyXzMxXzYwNzFcIix7YXR0cjp7eTI6MTgwfSwgZHVyYXRpb246IDAuM30sJ3N0YXJ0JylcclxuXHJcblxyXG4gICAgYnV0dG9ucy5mb3JFYWNoKGJ1dHRvbiA9PiB7XHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHRsLnBsYXkoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdGwucmV2ZXJzZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLyooKCk9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpLmNsaWVudFdpZHRoKVxyXG4gICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuY2xpZW50V2lkdGggPCA1NTEpIHtcclxuICAgICAgICAgICAgcmV0dXJuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGltYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5oZXJvLWNhcmRzLWxpc3QgLmNhcmQnKTtcclxuICAgICAgICBjb25zdCBpbmRpY2VzID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogaW1hZ2VzLmxlbmd0aCB9LCAoXywgaW5kZXgpID0+IGluZGV4KTtcclxuICAgICAgICBsZXQgdGwgPSBuZXcgZ3NhcC50aW1lbGluZSgpO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSBpbmRpY2VzLmxlbmd0aCAtIDE7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgY29uc3QgaiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChpICsgMSkpO1xyXG4gICAgICAgICAgICBbaW5kaWNlc1tpXSwgaW5kaWNlc1tqXV0gPSBbaW5kaWNlc1tqXSwgaW5kaWNlc1tpXV07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGluZGljZXMuZm9yRWFjaCgoaW5kZXgsIGkpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaW1hZ2UgPSBpbWFnZXNbaW5kZXhdO1xyXG4gICAgICAgICAgICB0bC50byhpbWFnZS5xdWVyeVNlbGVjdG9yKCdpbWcnKSwge1xyXG4gICAgICAgICAgICAgICAgZHVyYXRpb246MC40LFxyXG4gICAgICAgICAgICAgICAgb3BhY2l0eTogMC4xNVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0pKCk7Ki9cclxuXHJcblxyXG5cclxufSlcclxuIiwidmFyICQgPSBqUXVlcnk7XHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgIGxldCBjdXJyZW50UGFnZSA9IDY7XHJcbiAgICBsZXQgaGFzTW9yZUl0ZW1zID0gdHJ1ZTtcclxuICAgIGxldCBsb2FkTW9yZUFyZWFzQnRuID0galF1ZXJ5KCcucG9zdHMtbG9hZC1tb3JlX19idG4nKTtcclxuICAgIGxldCBsb2FkTGVzc0J0biA9IGpRdWVyeSgnLmJ0bi1sb2FkLWxlc3MnKTtcclxuICAgIGxvYWRNb3JlQXJlYXNCdG4ub24oJ2NsaWNrJywgbG9hZE1vcmVJdGVtcyk7XHJcbiAgICBsb2FkTGVzc0J0bi5vbignY2xpY2snLCBsb2FkTGVzc0l0ZW1zKTtcclxuXHJcbiAgICBmdW5jdGlvbiBsb2FkTGVzc0l0ZW1zKCkge1xyXG4gICAgICAgIGNvbnN0IHBvc3RzID0gJCgnLnBvc3RzLWxpc3QgLnBvc3QnKTtcclxuICAgICAgICBwb3N0cy5lYWNoKChpZHgsIGVsKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChpZHggPiAyKSAgJChlbCkucmVtb3ZlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAkKCcucG9zdHMnKS5hZGRDbGFzcygnd2l0aC1sb2FkLW1vcmUnKTtcclxuICAgICAgICBsb2FkTGVzc0J0bi5yZW1vdmVDbGFzcygnc2hvdycpO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gbG9hZE1vcmVJdGVtcygpIHtcclxuICAgICAgICBsZXQgbG9hZE1vcmVCdG4gPSBqUXVlcnkodGhpcyk7XHJcbiAgICAgICAgbG9hZE1vcmVCdG4uYmx1cigpO1xyXG5cclxuICAgICAgICBpZih3aW5kb3cuaW5uZXJXaWR0aCA8IDc2OCkge1xyXG4gICAgICAgICAgICB2YXIgc2Nyb2xsVG8gPSB3aW5kb3cucGFnZVlPZmZzZXQgLSAod2luZG93LmlubmVySGVpZ2h0IC0gdGhpcy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20pO1xyXG4gICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8oMCwgc2Nyb2xsVG8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBvc3RJRCA9IGpRdWVyeSh0aGlzKS5kYXRhKCdwb3N0Jyk7XHJcbiAgICAgICAgaWYgKCFoYXNNb3JlSXRlbXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgalF1ZXJ5LmFqYXgoe1xyXG4gICAgICAgICAgICB1cmw6IGZpbHRlcnNfYWpheC51cmwsXHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgYWN0aW9uOiAnbG9hZF9tb3JlX3Bvc3RzJyxcclxuICAgICAgICAgICAgICAgIHBhZ2U6IGN1cnJlbnRQYWdlLFxyXG4gICAgICAgICAgICAgICAgcG9zdElEOiBwb3N0SUQsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXNwb25zZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlICYmIHJlc3BvbnNlLnN1Y2Nlc3MgJiYgcmVzcG9uc2UuZGF0YSAmJiByZXNwb25zZS5kYXRhLmh0bWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBqUXVlcnkoJy5wb3N0cy1saXN0JykuYXBwZW5kKHJlc3BvbnNlLmRhdGEuaHRtbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVudFBhZ2UrKztcclxuICAgICAgICAgICAgICAgICAgICBoYXNNb3JlSXRlbXMgPSByZXNwb25zZS5kYXRhLmhhc01vcmVJdGVtcztcclxuICAgICAgICAgICAgICAgICAgICAkKCcucG9zdHMnKS5yZW1vdmVDbGFzcygnd2l0aC1sb2FkLW1vcmUnKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc01vcmVJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2FkTW9yZUJ0bi5hZGRDbGFzcygnZGlzYWJsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZExlc3NCdG4uYWRkQ2xhc3MoJ3Nob3cnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59KTtcclxuIl19
